<!DOCTYPE html>
<html style="height:100%;">
  <head>
    <meta charset="utf-8">
    <title>Enquadrados - Cidade</title>
    <link type="text/css" rel="stylesheet" href="css/google-material-icons.css">
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
  <body style="height:100%;">
    <div class="navbar-fixed">
      <nav>
        <div class="nav-wrapper center">
          <a href="/" class="breadcrumb">Enquadrados</a>
          <a href="#!" class="breadcrumb">Cidade</a>
        </div>
      </nav>
    </div>
    <div class="container" style="height:80%;">
      <div class="row">
        <div class="col s12">
          <h4 class="header">Quantidade de servidores por tipo</h4>
          <div class="card horizontal">
<!--            <div class="card-image">
              <img src="img/campina.jpg">
            </div>-->
	    <div class="card-stacked">
	      <div class="card-content">
		<h5>Camara Municipal da Cidade</h5>
                <ul class="collection">
                  <li class="collection-item avatar">
                    <img src="" alt="" class="circle">
                    <span class="title">Comissionados</span>
                    <p>
                      Quantidade de servidores: <b>181</b>
                    </p>
                    <a href="#!" class="secondary-content"><i class="material-icons">thumb_down</i></a>
                  </li>
                  <li class="collection-item avatar">
                    <img src="" alt="" class="circle">
                    <span class="title">Eletivos</span>
                    <p>
                      Quantidade de servidores: <b>152</b>
                    </p>
                    <a href="#!" class="secondary-content"><i class="material-icons">thumb_down</i></a>
                  </li>
                  <li class="collection-item avatar">
                    <img src="" alt="" class="circle">
                    <span class="title">Efetivos</span>
                    <p>
                      Quantidade de servidores: <b>10</b>
                    </p>
                    <a href="#!" class="secondary-content"><i class="material-icons">thumb_up</i></a>
                  </li>
                </ul>
                <div class="row">
                  <div id="job-distribution" class="col s2 offset-s5" style="height:150px;">
                  </div>
                </div>
	      </div>
	    </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="page-footer">
      <div class="container">
	<div iclass="row">
	  <div class="col l6 s12">
	    <h5 class="white-text">Footer</h5>
	    <p class="grey-text text-lighten-4">Mais informacoes relevantes aqui...</p>
	  </div>
	</div>
      </div>
      <div class="footer-copyright">
	<div class="container">
	<a class="grey-text text-lighten-4 right" href="#!">Link externo?</a>
	</div>
      </div>
    </footer>
    <script type="text/javascript" src="js/jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript" src="js/d3.min.js"></script>
    <script type="text/javascript" src="js/topojson.v1.min.js"></script>
    <script type="application/javascript">
      $(document).ready(function() {
        var svgInliner = function() {
          $('img.svg').each(function() {
            var $img = $(this);
            var imgId = $img.attr('id');
            var imgClass = $img.attr('class');
            var imgUrl = $img.attr('src');
            $.get(imgUrl, function(data) {
              var $svg = $(data).find('svg');
              if (typeof imgId !== 'undefined') {
                $svg = $svg.attr('id', imgId);
              }
              if (typeof imgClass !== 'undefined') {
                $svg = $svg.attr('class', imgClass);
              }
              $svg = $svg.removeAttr('xmlns:a');
              $svg = $svg.removeAttr('xmlns');
              if (!$svg.attr('viewBox') && $svg.attr('height') && $svg.attr('width')) {
                $svg = $svg.attr('viewBox', '0 0 ' + $svg.attr('height') + ' ' + $svg.attr('width'));
              }
              $svg = $svg.attr('fill', 'green');
              $img.replaceWith($svg);
            }, 'xml');
          });
        };

        /*$("#job-distribution").append("<div style='width:100%; height:auto;'></div><div style='width:100%; height:auto;'></div><div style='width:100%; height:auto;'></div><div style='width:100%; height:auto;'></div>");
        var displayer = function(percentage) {
          var row = 1;
          while (percentage > 0) {
            if ($("#job-distribution").length >= 5) {
              row = row + 1;
            }
            $("#job-distribution:nth-child(" + row + ")").append("<img class='svg' src='img/people.svg' style='width:20%; display:inline-block; margin:0 auto; vertical-align:middle;'>");
            percentage = percentage - 5;
          }
          //svgInliner();
        };*/
        //displayer(64);
        var svg = d3.select("#job-distribution").append("svg").attr("width", "100%").attr("viewBox", "0 0 800 400");
        d3.json("pb.json", function(error, pb) {
          if (error) return console.log(error);
          svg.append("path").datum(topojson.feature(pb, pb.objects.municipios)).attr("d", d3.geoPath().projection(d3.geoMercator().scale(9000).translate([800 * 7.7, 400 * -2.3])));
        });
      });
    </script>
  </body>
</html>
